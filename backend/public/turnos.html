<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Agendar Turno de Lavado de Autos en Reconquista | Reserva Online | Daytona Clean Service</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Agend√° tu turno de lavado de autos en Reconquista online. Reserva f√°cil y r√°pido para limpieza de veh√≠culos, tapizados y detailing. ¬°Servicio a domicilio!" />
  <meta name="keywords" content="agendar turno lavado autos Reconquista, reserva online lavado, turnos lavado autos, agendar limpieza tapizados, reserva detailing Reconquista, turnos servicio domicilio, agendar Daytona Clean Service" />
  <meta name="author" content="Daytona Clean Service - Benjam√≠n Gianneschi" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="Spanish" />
  <meta name="geo.region" content="AR-SF" />
  <meta name="geo.placename" content="Reconquista, Santa Fe, Argentina" />
  <meta name="geo.position" content="-29.153022;-59.639699" />
  <meta name="ICBM" content="-29.153022, -59.639699" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="Agendar Turno de Lavado de Autos en Reconquista" />
  <meta property="og:description" content="Agend√° tu turno de lavado de autos online. Reserva f√°cil para limpieza de veh√≠culos y tapizados en Reconquista." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://daytona.com.ar/turnos.html" />
  <meta property="og:site_name" content="Daytona Clean Service" />
  <meta property="og:locale" content="es_AR" />
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Agendar Turno Lavado de Autos Reconquista" />
  <meta name="twitter:description" content="Agend√° tu turno de lavado de autos online. Reserva f√°cil en Reconquista." />
  
  <!-- Schema.org Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ReservationPage",
    "name": "Agendar Turno de Lavado de Autos",
    "description": "P√°gina para agendar turnos de lavado de autos y limpieza de tapizados en Reconquista",
    "provider": {
      "@type": "LocalBusiness",
      "name": "Daytona Clean Service",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Ituzaingo 1455",
        "addressLocality": "Reconquista",
        "addressRegion": "Santa Fe",
        "addressCountry": "AR"
      },
      "telephone": "+5493482588383"
    },
    "areaServed": "Reconquista, Santa Fe, Argentina",
    "serviceType": ["Lavado de Autos", "Limpieza de Tapizados", "Detailing"],
    "availableService": [
      {
        "@type": "Service",
        "name": "Limpieza Convencional",
        "price": "20000",
        "priceCurrency": "ARS"
      },
      {
        "@type": "Service",
        "name": "Limpieza Detallada",
        "price": "100000",
        "priceCurrency": "ARS"
      },
      {
        "@type": "Service",
        "name": "Limpieza de Tapizados",
        "price": "100000",
        "priceCurrency": "ARS"
      }
    ]
  }
  </script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/components/header.css" />
  <link rel="stylesheet" href="css/vehiculos.css">
  <link rel="stylesheet" href="css/tapizados.css">
  <link rel="icon" href="/img/favicon.ico" type="image/x-icon" />
  <style>
    body {
      background: #181818;
      color: #fff;
      font-family: 'Roboto', Arial, sans-serif;
      min-height: 100vh;
    }
    .wizard-step {
      display: flex;
      align-items: center;
      gap: 10px;
      color: #fff;
      font-weight: 500;
      padding: 10px 0;
    }
    .wizard-step.active {
      color: #ff3b3f;
    }
    .wizard-bar {
      height: 4px;
      background: linear-gradient(90deg, #ff3b3f 0%, #b31217 100%);
      border-radius: 2px;
      margin-bottom: 30px;
    }
    .card-turno {
      background: #232323;
      border-radius: 12px;
      border: 1.5px solid #ff3b3f;
      margin-bottom: 24px;
      padding: 24px;
      color: #fff;
    }
    .servicio-card {
      background: #232323;
      border: 1.5px solid #ff3b3f;
      border-radius: 10px;
      padding: 18px 20px;
      margin-bottom: 18px;
      cursor: pointer;
      transition: box-shadow 0.2s, border 0.2s;
    }
    .servicio-card.selected, .servicio-card:hover {
      border: 2.5px solid #ff3b3f;
      box-shadow: 0 0 12px #ff3b3f44;
    }
    .servicio-precio {
      color: #ff3b3f;
      font-weight: 700;
      font-size: 1.2rem;
    }
    .step-btn {
      background: #ff3b3f;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 10px 28px;
      font-weight: 600;
      margin-top: 18px;
      transition: background 0.2s;
    }
    .step-btn:hover {
      background: #b31217;
    }
    .step-btn[disabled] {
      background: #444;
      color: #bbb;
      cursor: not-allowed;
    }
    .resumen-turno {
      background: #232323;
      border: 1.5px solid #ff3b3f;
      border-radius: 10px;
      padding: 18px 20px;
      margin-bottom: 18px;
    }
    .form-label {
      color: #fff;
      font-weight: 500;
    }
    .form-control, .form-select {
      background: #232323;
      color: #fff;
      border: 1px solid #444;
    }
    .form-control:focus, .form-select:focus {
      border-color: #ff3b3f;
      box-shadow: 0 0 0 0.2rem #ff3b3f33;
    }
    .wizard-nav {
      display: flex;
      justify-content: space-between;
      margin-bottom: 30px;
      gap: 10px;
    }
    @media (max-width: 600px) {
      .wizard-nav {
        flex-direction: column;
        gap: 8px;
      }
      .card-turno, .resumen-turno {
        padding: 12px 8px;
      }
      .container.py-5 {
        margin-top: 70px !important;
        padding-top: 20px !important;
      }
    }
    .wizard-progress-container {
      width: 100%;
      margin-bottom: 32px;
    }
    .wizard-bar-bg {
      width: 100%;
      height: 7px;
      background: #232323;
      border-radius: 4px;
      position: relative;
      margin-bottom: 18px;
      overflow: hidden;
    }
    .wizard-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, #ff3b3f 0%, #b31217 100%);
      border-radius: 4px;
      width: 0%;
      transition: width 0.4s cubic-bezier(.4,1.3,.6,1);
    }
    .wizard-nav-modern {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      position: relative;
      z-index: 2;
    }
    .wizard-step-modern {
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      color: #fff;
      font-weight: 500;
      font-size: 0.98rem;
      position: relative;
      z-index: 2;
    }
    .wizard-icon-circle {
      width: 38px;
      height: 38px;
      border-radius: 50%;
      background: #232323;
      border: 2.5px solid #b31217;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      margin-bottom: 6px;
      color: #ff3b3f;
      transition: border 0.3s, background 0.3s, color 0.3s;
    }
    .wizard-step-modern.active .wizard-icon-circle {
      background: #ff3b3f;
      color: #fff;
      border: 2.5px solid #ff3b3f;
      box-shadow: 0 0 8px #ff3b3f66;
    }
    .wizard-step-modern.completed .wizard-icon-circle {
      background: #b31217;
      color: #fff;
      border: 2.5px solid #b31217;
    }
    .wizard-step-modern span {
      font-size: 0.93rem;
      margin-top: 2px;
      color: #fff;
    }
    @media (max-width: 600px) {
      .wizard-nav-modern {
        flex-direction: column;
        gap: 10px;
      }
      .wizard-step-modern {
        flex-direction: row;
        gap: 10px;
        align-items: center;
        width: 100%;
        justify-content: flex-start;
      }
      .wizard-step-modern span {
        margin-top: 0;
      }
    }
    /* Contenedor visual moderno para el turnero */
    .turnero-contenedor-moderno {
      background: #232323;
      border-radius: 18px;
      padding: 32px 24px 80px 24px;
      margin: 0 auto 32px auto;
      position: relative;
      min-height: 600px;
      max-width: 500px;
    }
    .wizard-content-moderno {
      min-height: 320px;
    }
    .turnero-botones-fijos {
      /* position: absolute; */
      position: static;
      left: unset;
      right: unset;
      bottom: unset;
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 18px 24px;
      background: linear-gradient(0deg, #181818 90%, #23232300 100%);
      border-bottom-left-radius: 18px;
      border-bottom-right-radius: 18px;
      z-index: 10;
      min-height: 70px;
      margin-top: 32px;
    }
    .turnero-botones-fijos .btn,
    .turnero-botones-fijos .step-btn {
      min-width: 120px;
      margin: 0;
    }
    @media (max-width: 600px) {
      .turnero-contenedor-moderno {
        padding: 16px 4px 80px 4px;
        min-height: 400px;
        max-width: 100vw;
      }
      .turnero-botones-fijos {
        padding: 10px 6px;
        min-height: 60px;
      }
      .turnero-botones-fijos .btn,
      .turnero-botones-fijos .step-btn {
        min-width: 90px;
        font-size: 0.95rem;
      }
    }

    /* Botones iguales y bien ubicados */
    .turnero-botones-fijos .btn,
    .turnero-botones-fijos .step-btn {
      min-width: 140px;
      max-width: 180px;
      font-size: 1.08rem;
      border-radius: 8px;
      padding: 12px 0;
      margin: 0;
      box-sizing: border-box;
    }
    .turnero-botones-fijos {
      justify-content: space-between;
    }

    /* Estilos para el selector de categor√≠as - REDUCIDO */
    .categoria-selector {
      margin-bottom: 1.5rem;
    }

    .categoria-card {
      background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
      border: 2px solid #333;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      height: 100%;
    }

    .categoria-card:hover {
      border-color: #ff3b3f;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 59, 63, 0.2);
    }

    .categoria-card.selected {
      border-color: #ff3b3f;
      background: linear-gradient(135deg, #ff3b3f 0%, #e63946 100%);
      color: white;
    }

    .categoria-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
      color: #ff3b3f;
    }

    .categoria-card.selected .categoria-icon {
      color: white;
    }

    .categoria-card h5 {
      margin-bottom: 0.3rem;
      font-weight: 600;
      font-size: 1.1rem;
    }

    .categoria-card p {
      margin-bottom: 0;
      font-size: 0.8rem;
      line-height: 1.2;
    }

    /* Estilos para las listas de servicios */
    .servicios-container {
      animation: fadeIn 0.3s ease-in;
    }

    .servicios-lista {
      max-height: 400px;
      overflow-y: auto;
    }

    .servicio-item {
      background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
      border: 2px solid #333;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .servicio-item:hover {
      border-color: #ff3b3f;
      transform: translateX(5px);
    }

    .servicio-item.selected {
      border-color: #ff3b3f;
      background: linear-gradient(135deg, #ff3b3f 0%, #e63946 100%);
      color: white;
    }

    .servicio-info {
      display: flex;
      align-items: center;
      flex: 1;
    }

    .servicio-icon {
      font-size: 1.2rem;
      margin-right: 1rem;
      color: #ff3b3f;
      width: 30px;
      text-align: center;
    }

    .servicio-item.selected .servicio-icon {
      color: white;
    }

    .servicio-details h6 {
      margin: 0;
      font-weight: 600;
      font-size: 1rem;
    }

    .servicio-details p {
      margin: 0;
      font-size: 0.85rem;
      color: #ccc;
    }

    .servicio-item.selected .servicio-details p {
      color: rgba(255, 255, 255, 0.8);
    }

    .servicio-precio {
      font-size: 1rem;
      font-weight: 700;
      color: #ff3b3f;
      text-align: right;
    }

    .servicio-item.selected .servicio-precio {
      color: white;
    }

    /* Animaciones */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }



    /* Servicios seleccionados */
    .servicio-seleccionado {
      background: linear-gradient(135deg, #ff3b3f 0%, #e63946 100%);
      border: 2px solid #ff3b3f;
      border-radius: 8px;
      padding: 0.75rem;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .servicio-seleccionado .btn-remove {
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .servicio-seleccionado .btn-remove:hover {
      background: rgba(255, 255, 255, 0.3);
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <div id="header-container"></div>
  <div class="container py-5" style="max-width: 600px; margin-top: 80px;">
    <div class="turnero-contenedor-moderno">
      <h1 class="fw-bold text-center mb-2" style="color: #fff;">Agenda tu Turno</h1>
      <p class="text-center mb-4" style="color: #fff;">Reserva tu cita de forma r√°pida y sencilla. Te confirmaremos por WhatsApp y te enviaremos recordatorios autom√°ticos.</p>
      
      <!-- Wizard Steps -->
      <div class="wizard-progress-container mb-4">
        <div class="wizard-bar-bg">
          <div class="wizard-bar-fill" id="wizard-bar-fill"></div>
        </div>
        <div class="wizard-nav-modern">
          <div class="wizard-step-modern" id="step-indicator-1">
            <div class="wizard-icon-circle"><i class="fas fa-cogs"></i></div>
            <span>Servicio</span>
          </div>
          <div class="wizard-step-modern" id="step-indicator-2">
            <div class="wizard-icon-circle"><i class="fas fa-user"></i></div>
            <span>Agente</span>
          </div>
          <div class="wizard-step-modern" id="step-indicator-3">
            <div class="wizard-icon-circle"><i class="fas fa-calendar-alt"></i></div>
            <span>Turno</span>
          </div>
          <div class="wizard-step-modern" id="step-indicator-4">
            <div class="wizard-icon-circle"><i class="fas fa-user-edit"></i></div>
            <span>Datos</span>
          </div>
          <div class="wizard-step-modern" id="step-indicator-5">
            <div class="wizard-icon-circle"><i class="fas fa-map-marker-alt"></i></div>
            <span>Ubicaci√≥n</span>
          </div>
          <div class="wizard-step-modern" id="step-indicator-6">
            <div class="wizard-icon-circle"><i class="fas fa-check-circle"></i></div>
            <span>Confirmar</span>
          </div>
        </div>
      </div>
      <!-- Fin Wizard Steps -->
      <div class="wizard-bar"></div>
      <!-- Wizard Content -->
      <div id="wizard-content">
        <!-- Paso 1: Seleccionar Servicio -->
        <div id="step-1">
          <h3 class="mb-4">¬øQu√© tipo de servicio necesitas?</h3>
          
          <!-- Selector de categor√≠a principal -->
          <div class="categoria-selector mb-4">
            <div class="row g-3">
              <div class="col-6">
                <div class="categoria-card" id="categoria-vehiculos" data-categoria="vehiculos">
                  <div class="categoria-icon">
                    <i class="fas fa-car"></i>
                  </div>
                  <h5>Veh√≠culos</h5>
                  <p class="text-muted">Lavado, limpieza y tapizado de autos, pickups y SUVs</p>
                </div>
              </div>
              <div class="col-6">
                <div class="categoria-card" id="categoria-tapizados" data-categoria="tapizados">
                  <div class="categoria-icon">
                    <i class="fas fa-couch"></i>
                  </div>
                  <h5>Tapizados</h5>
                  <p class="text-muted">Limpieza de sillones, sillas, colchones y alfombras</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Servicios de Veh√≠culos -->
          <div id="servicios-vehiculos" class="servicios-container" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h4><i class="fas fa-car me-2"></i>Servicios de Veh√≠culos</h4>
              <button class="btn btn-outline-secondary btn-sm" onclick="cambiarCategoria()">
                <i class="fas fa-arrow-left me-1"></i>Cambiar categor√≠a
              </button>
            </div>
            
            <div class="servicios-lista" id="lista-servicios-vehiculos">
              <!-- Los servicios se cargar√°n din√°micamente desde la BD -->
            </div>
          </div>

          <!-- Servicios de Tapizados -->
          <div id="servicios-tapizados" class="servicios-container" style="display: none;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h4><i class="fas fa-couch me-2"></i>Servicios de Tapizados</h4>
              <button class="btn btn-outline-secondary btn-sm" onclick="cambiarCategoria()">
                <i class="fas fa-arrow-left me-1"></i>Cambiar categor√≠a
              </button>
            </div>
            
            <div class="servicios-lista" id="lista-servicios-tapizados">
              <!-- Los servicios se cargar√°n din√°micamente desde la BD -->
            </div>
          </div>

          <!-- Servicios seleccionados -->
          <div id="servicios-seleccionados" class="mt-4" style="display: none;">
            <h5>Servicios seleccionados:</h5>
            <div id="lista-servicios" class="row g-2"></div>
          </div>


        </div>
        <!-- Paso 2: Seleccionar Profesional -->
        <div id="step-2" style="display:none;">
          <h3 class="mb-3">Seleccionar Profesional</h3>
          <div class="servicio-card selected" id="profesional-benjamin" data-nombre="Benjam√≠n Gianneschi">
            <div class="d-flex align-items-center">
              <i class="fas fa-user-circle fa-2x me-3"></i>
              <div>
                <strong>Benjam√≠n Gianneschi</strong>
                <div class="text-muted small">Especialista en limpieza profesional</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Paso 3: Seleccionar Fecha y Hora -->
        <div id="step-3" style="display:none;">
          <h3 class="mb-3">Seleccionar Fecha y Hora</h3>
          
          <div class="card-turno">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="fecha" class="form-label">Fecha *</label>
                <input type="date" class="form-control" id="fecha" min="" required />
              </div>
              <div class="col-md-6 mb-3">
                <label for="hora" class="form-label">Hora *</label>
                <select class="form-select" id="hora" required>
                  <option value="">Selecciona una hora</option>
                  <option>08:00</option>
                  <option>10:00</option>
                  <option>12:00</option>
                  <option>14:00</option>
                  <option>16:00</option>
                </select>
              </div>
            </div>
            
            <div class="alert alert-info" style="background: #232323; color: #fff; border: 1.5px solid #17a2b8;">
              <i class="fas fa-info-circle me-2"></i>
              <strong>Horarios disponibles:</strong> Lunes a Viernes de 8:00 a 18:00. Los turnos se confirman por WhatsApp.
            </div>
          </div>
        </div>
        <!-- Paso 4: Datos Personales -->
        <div id="step-4" style="display:none;">
          <h3 class="mb-3">Datos Personales</h3>
          
          <!-- Mensaje para usuarios logueados -->
          <div id="usuario-logueado-info" class="alert alert-info mb-4" style="display:none; background: #232323; color: #fff; border: 1.5px solid #17a2b8;">
            <i class="fas fa-user-check me-2"></i>
            <strong>¬°Bienvenido de vuelta!</strong> Tus datos han sido auto-completados desde tu cuenta. 
            Puedes modificarlos si es necesario.
          </div>
          
          <form id="datos-personales-form">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="nombre" class="form-label">Nombre *</label>
                <input type="text" class="form-control" id="nombre" required />
              </div>
              <div class="col-md-6 mb-3">
                <label for="apellido" class="form-label">Apellido *</label>
                <input type="text" class="form-control" id="apellido" required />
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="telefono" class="form-label">Tel√©fono *</label>
                <input type="tel" class="form-control" id="telefono" placeholder="+54 9 3482 123456" required />
                <small class="text-muted">Para confirmar tu turno por WhatsApp</small>
              </div>
              <div class="col-md-6 mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" placeholder="tu@email.com" />
                <small class="text-muted">Opcional - Para enviarte recordatorios</small>
              </div>
            </div>
          </form>
        </div>
        
        <!-- Paso 5: Ubicaci√≥n del Servicio -->
        <div id="step-5" style="display:none;">
          <h3 class="mb-3">Ubicaci√≥n del Servicio</h3>
          
          <!-- Para servicios vehiculares -->
          <div id="ubicacion-vehiculos" style="display:none;">
            <div class="card-turno">
              <h5 class="mb-3">
                <i class="fas fa-car me-2 text-primary"></i>
                Opciones de Servicio Vehicular
              </h5>
              
              <div class="mb-4">
                <div class="form-check mb-3">
                  <input class="form-check-input" type="radio" name="opcion-vehiculo" id="opcion-buscar" value="buscar">
                  <label class="form-check-label" for="opcion-buscar">
                    <strong>üöó Buscar y entregar el veh√≠culo</strong>
                    <br><small class="text-muted">Nosotros pasamos a buscar tu veh√≠culo y te lo entregamos en tu domicilio</small>
                  </label>
                </div>
                
                <div class="form-check mb-3">
                  <input class="form-check-input" type="radio" name="opcion-vehiculo" id="opcion-traer" value="traer">
                  <label class="form-check-label" for="opcion-traer">
                    <strong>üè† Traer el veh√≠culo al taller</strong>
                    <br><small class="text-muted">T√∫ traes el veh√≠culo a nuestro taller y lo retiras cuando est√© listo</small>
                  </label>
                </div>
              </div>
              
              <!-- Campos para opci√≥n "buscar" -->
              <div id="campos-buscar" style="display:none;">
                <div class="mb-3">
                  <label for="direccion-vehiculo" class="form-label">Direcci√≥n donde buscar el veh√≠culo *</label>
                  <textarea class="form-control" id="direccion-vehiculo" rows="3" placeholder="Ingresa la direcci√≥n completa donde est√° ubicado el veh√≠culo"></textarea>
                </div>
                
                <div class="mb-3">
                  <label for="detalles-vehiculo" class="form-label">Detalles adicionales (opcional)</label>
                  <textarea class="form-control" id="detalles-vehiculo" rows="2" placeholder="Informaci√≥n adicional: acceso, llaves, contacto, etc."></textarea>
                </div>
              </div>
              
              <!-- Campos para opci√≥n "traer" -->
              <div id="campos-traer" style="display:none;">
                <div class="alert alert-info" style="background: #232323; color: #fff; border: 1.5px solid #17a2b8;">
                  <i class="fas fa-info-circle me-2"></i>
                  <strong>Servicio en taller</strong><br>
                  Deber√°s traer tu veh√≠culo a nuestro taller ubicado en <strong>Av. San Mart√≠n 1234, C√≥rdoba</strong>.<br>
                  Te avisaremos por WhatsApp cuando est√© listo para retirar.
                </div>
              </div>
            </div>
          </div>
          
          <!-- Para servicios de tapizados -->
          <div id="ubicacion-tapizados" style="display:none;">
            <div class="card-turno">
              <h5 class="mb-3">
                <i class="fas fa-couch me-2 text-success"></i>
                Servicio a Domicilio
              </h5>
              
              <div class="alert alert-success" style="background: #232323; color: #fff; border: 1.5px solid #28a745;">
                <i class="fas fa-home me-2"></i>
                <strong>Servicio a domicilio</strong><br>
                Nuestros profesionales se dirigen a tu domicilio para realizar el servicio.
              </div>
              
              <div class="mb-3">
                <label for="direccion-tapizado" class="form-label">Direcci√≥n del servicio *</label>
                <textarea class="form-control" id="direccion-tapizado" rows="3" placeholder="Ingresa la direcci√≥n completa donde se realizar√° el servicio" required></textarea>
              </div>
              
              <div class="mb-3">
                <label for="detalles-tapizado" class="form-label">Detalles adicionales (opcional)</label>
                <textarea class="form-control" id="detalles-tapizado" rows="2" placeholder="Informaci√≥n adicional sobre la ubicaci√≥n, acceso, etc."></textarea>
              </div>
            </div>
          </div>
        </div>
        <!-- Paso 6: Confirmar -->
        <div id="step-6" style="display:none;">
          <h3 class="mb-3">Confirmar Turno</h3>
          
          <div class="card-turno">
            <h5 class="mb-3">
              <i class="fas fa-check-circle me-2 text-success"></i>
              Resumen del Turno
            </h5>
            <div id="resumen-turno"></div>
          </div>
          
          <div class="alert alert-success mt-4" style="background: #232323; color: #fff; border: 1.5px solid #28a745;">
            <i class="fas fa-info-circle me-2"></i>
            <strong>¬°Casi listo!</strong> Revisa los datos y confirma tu turno. Te enviaremos una confirmaci√≥n por WhatsApp.
          </div>
        </div>
        <!-- Mensaje de √©xito -->
        <div id="turno-exito" style="display:none;">
          <div class="text-center">
            <div class="alert alert-success" style="background: #232323; color: #fff; border: 1.5px solid #28a745;">
              <i class="fas fa-check-circle fa-3x text-success mb-3"></i>
              <h4 class="mb-3">¬°Turno Confirmado!</h4>
              <p class="mb-3">Tu turno ha sido creado exitosamente. Te enviaremos una confirmaci√≥n por WhatsApp en los pr√≥ximos minutos.</p>
              <p class="mb-0"><small>üìã El turno qued√≥ registrado en nuestro sistema para seguimiento.</small></p>
            </div>
            
            <div class="mt-4">
              <a href="/" class="btn btn-primary me-2">
                <i class="fas fa-home me-1"></i>Volver al Inicio
              </a>
              <a href="/mi-cuenta.html" class="btn btn-outline-primary">
                <i class="fas fa-user me-1"></i>Mi Cuenta
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- Botonera fija inferior -->
      <div class="turnero-botones-fijos">
        <button type="button" class="btn btn-secondary" id="btn-anterior-fijo" style="display:none;">Anterior</button>
        <button type="button" class="step-btn" id="btn-siguiente-fijo" style="display:none;">Siguiente</button>
        <button type="button" class="step-btn" id="btn-confirmar-fijo" style="display:none;">Confirmar Turno</button>
      </div>
    </div>
  </div>
  <footer>
    <p>¬© 2025 Daytona - Todos los derechos reservados
      <a href="https://www.instagram.com/daytona_clean_service" target="_blank" title="Instagram Daytona">
        <i class="fab fa-instagram fa-lg"></i> @daytona_clean_service
      </a>
    </p>
  </footer>



  <!-- Bootstrap JS debe ir primero para que los dropdowns funcionen -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/config.js"></script>
  <script src="js/api-service.js"></script>
  <script src="js/include-header.js"></script>
  <script src="js/include-footer.js"></script>
  <script>
  // Sistema de Turnos - Daytona Clean Service
  class TurnosApp {
    constructor() {
      this.currentStep = 1;
      this.selectedServices = [];
      this.appointmentData = {
        services: [],
        date: null,
        time: null,
        clientName: '',
        clientPhone: '',
        clientEmail: '',
        serviceLocation: '',
        totalAmount: 0
      };
      this.services = [];
      this.apiService = new ApiService();
      this.init();
    }

    async init() {
      console.log('üöÄ Iniciando sistema de turnos...');
      await this.loadServices();
      this.setupEventListeners();
      this.showStep(1);
      this.setMinDate();
    }

    setMinDate() {
      const today = new Date().toISOString().split('T')[0];
      const dateInputs = document.querySelectorAll('input[type="date"]');
      dateInputs.forEach(input => {
        input.min = today;
      });
    }

    async loadServices() {
      try {
        console.log('üì° Cargando servicios desde la API...');
        const response = await this.apiService.request('/appointments/services');
        
        if (response.success && response.services) {
          this.services = response.services;
          console.log('‚úÖ Servicios cargados:', this.services.length);
          this.renderServices();
        } else {
          console.error('‚ùå Error en la respuesta de la API:', response.message);
          this.showError('Error cargando servicios: ' + (response.message || 'Respuesta inv√°lida'));
        }
      } catch (error) {
        console.error('‚ùå Error cargando servicios:', error);
        this.showError('Error de conexi√≥n: ' + error.message);
      }
    }

    showError(message) {
      const container = document.querySelector('.wizard-content-moderno');
      if (container) {
        container.innerHTML = `
          <div class="alert alert-danger">
            <h4>Error</h4>
            <p>${message}</p>
            <button class="btn btn-primary" onclick="location.reload()">Reintentar</button>
          </div>
        `;
      }
    }

    renderServices() {
      console.log('üé® Renderizando servicios...');
      
      const vehiculosContainer = document.getElementById('lista-servicios-vehiculos');
      const tapizadosContainer = document.getElementById('lista-servicios-tapizados');
      
      if (vehiculosContainer) {
        vehiculosContainer.innerHTML = '';
        const vehiculosServices = this.services.filter(s => s.category === 'vehiculos');
        console.log('üöó Servicios de veh√≠culos:', vehiculosServices.length);
        vehiculosServices.forEach(service => this.createServiceElement(service, vehiculosContainer));
      }
      
      if (tapizadosContainer) {
        tapizadosContainer.innerHTML = '';
        const tapizadosServices = this.services.filter(s => s.category === 'tapizados');
        console.log('üõãÔ∏è Servicios de tapizados:', tapizadosServices.length);
        tapizadosServices.forEach(service => this.createServiceElement(service, tapizadosContainer));
      }
    }

    createServiceElement(service, container) {
      const element = document.createElement('div');
      element.className = 'servicio-item';
      element.dataset.serviceId = service.id;
      element.dataset.name = service.name;
      element.dataset.price = service.price;
      element.dataset.duration = service.duration;
      
      element.innerHTML = `
        <div class="servicio-info">
          <div class="servicio-icon">
            <i class="fas ${this.getServiceIcon(service.name)}"></i>
          </div>
          <div class="servicio-details">
            <h6>${service.name}</h6>
            <p>${service.description || 'Servicio de limpieza profesional'}</p>
          </div>
        </div>
        <div class="servicio-precio">
          $${service.price.toLocaleString()}
        </div>
      `;
      
      element.addEventListener('click', () => {
        console.log('üñ±Ô∏è Click en servicio:', service.name);
        this.toggleService(service, element);
      });
      
      container.appendChild(element);
    }

    getServiceIcon(serviceName) {
      const name = serviceName.toLowerCase();
      if (name.includes('auto') || name.includes('car')) return 'fa-car';
      if (name.includes('pickup')) return 'fa-truck-pickup';
      if (name.includes('suv')) return 'fa-car-side';
      if (name.includes('motor')) return 'fa-cog';
      if (name.includes('sill√≥n') || name.includes('sillon')) return 'fa-couch';
      if (name.includes('silla')) return 'fa-chair';
      if (name.includes('colch√≥n') || name.includes('colchon')) return 'fa-bed';
      if (name.includes('alfombra')) return 'fa-rug';
      if (name.includes('puff')) return 'fa-couch';
      return 'fa-cog';
    }

    toggleService(service, element) {
      console.log('üîÑ Alternando servicio:', service.name);
      
      const existingIndex = this.selectedServices.findIndex(s => s.service_id === service.id);
      
      if (existingIndex >= 0) {
        // Deseleccionar
        this.selectedServices.splice(existingIndex, 1);
        element.classList.remove('selected');
        console.log('‚ùå Servicio deseleccionado:', service.name);
      } else {
        // Seleccionar
        this.selectedServices.push({
          service_id: service.id,
          name: service.name,
          price: service.price,
          duration: service.duration,
          quantity: 1
        });
        element.classList.add('selected');
        console.log('‚úÖ Servicio seleccionado:', service.name);
      }
      
      this.updateSelectedServicesDisplay();
      this.updateNextButton();
    }

    updateSelectedServicesDisplay() {
      const container = document.getElementById('servicios-seleccionados');
      const listContainer = document.getElementById('lista-servicios');
      
      if (!container || !listContainer) {
        console.log('‚ùå Contenedores de servicios no encontrados');
        return;
      }
      
      if (this.selectedServices.length === 0) {
        container.style.display = 'none';
        return;
      }
      
      container.style.display = 'block';
      listContainer.innerHTML = '';
      
      let total = 0;
      this.selectedServices.forEach(service => {
        const item = document.createElement('div');
        item.className = 'servicio-seleccionado';
        item.innerHTML = `
          <div class="servicio-info">
            <i class="fas ${this.getServiceIcon(service.name)}"></i>
            <span>${service.name} x${service.quantity}</span>
          </div>
          <div class="servicio-precio">
            $${service.price.toLocaleString()}
          </div>
          <button onclick="turnosApp.removeService(${service.service_id})" class="btn-remove">
            <i class="fas fa-times"></i>
          </button>
        `;
        listContainer.appendChild(item);
        total += service.price * service.quantity;
      });
      
      // Actualizar total
      const totalElement = document.getElementById('total-general');
      if (totalElement) {
        totalElement.textContent = `$${total.toLocaleString()}`;
      }
      
      this.appointmentData.totalAmount = total;
      console.log('üí∞ Total actualizado:', total);
    }

    removeService(serviceId) {
      console.log('üóëÔ∏è Removiendo servicio ID:', serviceId);
      this.selectedServices = this.selectedServices.filter(s => s.service_id !== serviceId);
      this.updateSelectedServicesDisplay();
      this.updateNextButton();
      
      // Actualizar UI
      const element = document.querySelector(`[data-service-id="${serviceId}"]`);
      if (element) {
        element.classList.remove('selected');
      }
    }

    updateNextButton() {
      const btnSiguiente = document.getElementById('btn-siguiente-fijo');
      if (btnSiguiente) {
        const shouldShow = this.selectedServices.length > 0;
        btnSiguiente.style.display = shouldShow ? 'block' : 'none';
        console.log('üîò Bot√≥n siguiente:', shouldShow ? 'visible' : 'oculto');
      }
    }

    setupEventListeners() {
      console.log('üîß Configurando event listeners...');
      
      // Bot√≥n siguiente
      const btnSiguiente = document.getElementById('btn-siguiente-fijo');
      if (btnSiguiente) {
        btnSiguiente.addEventListener('click', () => {
          console.log('‚û°Ô∏è Bot√≥n siguiente clickeado');
          this.nextStep();
        });
      }
      
      // Bot√≥n anterior
      const btnAnterior = document.getElementById('btn-anterior-fijo');
      if (btnAnterior) {
        btnAnterior.addEventListener('click', () => {
          console.log('‚¨ÖÔ∏è Bot√≥n anterior clickeado');
          this.previousStep();
        });
      }
      
      // Bot√≥n confirmar
      const btnConfirmar = document.getElementById('btn-confirmar-fijo');
      if (btnConfirmar) {
        btnConfirmar.addEventListener('click', () => {
          console.log('‚úÖ Bot√≥n confirmar clickeado');
          this.confirmAppointment();
        });
      }
      
      // Categor√≠as
      const categoriaVehiculos = document.getElementById('categoria-vehiculos');
      const categoriaTapizados = document.getElementById('categoria-tapizados');
      
      if (categoriaVehiculos) {
        categoriaVehiculos.addEventListener('click', () => {
          console.log('üöó Categor√≠a veh√≠culos seleccionada');
          this.selectCategory('vehiculos');
        });
      }
      
      if (categoriaTapizados) {
        categoriaTapizados.addEventListener('click', () => {
          console.log('üõãÔ∏è Categor√≠a tapizados seleccionada');
          this.selectCategory('tapizados');
        });
      }
      
      console.log('‚úÖ Event listeners configurados');
    }

    selectCategory(category) {
      console.log('üìÇ Seleccionando categor√≠a:', category);
      
      // Ocultar categor√≠as
      const categoriaSelector = document.querySelector('.categoria-selector');
      if (categoriaSelector) categoriaSelector.style.display = 'none';
      
      // Mostrar servicios de la categor√≠a
      const serviciosContainer = document.getElementById(`servicios-${category}`);
      if (serviciosContainer) {
        serviciosContainer.style.display = 'block';
        console.log('‚úÖ Mostrando servicios de:', category);
      }
      
      // Mostrar bot√≥n siguiente
      this.updateNextButton();
    }

    nextStep() {
      console.log('‚û°Ô∏è Siguiente paso:', this.currentStep);
      
      if (this.currentStep === 1) {
        if (this.selectedServices.length === 0) {
          alert('Por favor, selecciona al menos un servicio.');
          return;
        }
        this.appointmentData.services = this.selectedServices;
        this.currentStep = 2;
        
      } else if (this.currentStep === 2) {
        // Paso 2: Seleccionar Profesional (autom√°tico)
        this.currentStep = 3;
        
      } else if (this.currentStep === 3) {
        // Paso 3: Seleccionar Fecha y Hora
        const fechaInput = document.querySelector('input[type="date"]');
        const horaSelect = document.querySelector('select');
        
        if (!fechaInput || !fechaInput.value) {
          alert('Por favor, selecciona una fecha.');
          return;
        }
        
        if (!horaSelect || !horaSelect.value) {
          alert('Por favor, selecciona una hora.');
          return;
        }
        
        this.appointmentData.date = fechaInput.value;
        this.appointmentData.time = horaSelect.value;
        this.currentStep = 4;
        
      } else if (this.currentStep === 4) {
        // Paso 4: Datos Personales
        const nombre = document.getElementById('nombre')?.value;
        const apellido = document.getElementById('apellido')?.value;
        const telefono = document.getElementById('telefono')?.value;
        
        if (!nombre || !apellido || !telefono) {
          alert('Por favor, completa todos los campos obligatorios.');
          return;
        }
        
        this.appointmentData.clientName = `${nombre} ${apellido}`.trim();
        this.appointmentData.clientPhone = telefono;
        this.appointmentData.clientEmail = document.getElementById('email')?.value || '';
        this.currentStep = 5;
        
      } else if (this.currentStep === 5) {
        // Paso 5: Ubicaci√≥n
        const hasVehiculos = this.selectedServices.some(service => service.category === 'vehiculos');
        const hasTapizados = this.selectedServices.some(service => service.category === 'tapizados');
        
        let locationData = {};
        
        // Validar servicios vehiculares
        if (hasVehiculos) {
          const opcionVehiculo = document.querySelector('input[name="opcion-vehiculo"]:checked');
          if (!opcionVehiculo) {
            alert('Por favor, selecciona una opci√≥n para el servicio vehicular.');
            return;
          }
          
          if (opcionVehiculo.value === 'buscar') {
            const direccionVehiculo = document.getElementById('direccion-vehiculo')?.value;
            const detallesVehiculo = document.getElementById('detalles-vehiculo')?.value;
            
            if (!direccionVehiculo) {
              alert('Por favor, ingresa la direcci√≥n donde buscar el veh√≠culo.');
              return;
            }
            
            locationData.vehiculos = {
              tipo: 'buscar',
              direccion: direccionVehiculo,
              detalles: detallesVehiculo
            };
          } else {
            locationData.vehiculos = {
              tipo: 'traer',
              direccion: 'Taller Daytona - Av. San Mart√≠n 1234, C√≥rdoba',
              detalles: 'Cliente trae el veh√≠culo al taller'
            };
          }
        }
        
        // Validar servicios de tapizados
        if (hasTapizados) {
          const direccionTapizado = document.getElementById('direccion-tapizado')?.value;
          const detallesTapizado = document.getElementById('detalles-tapizado')?.value;
          
          if (!direccionTapizado) {
            alert('Por favor, ingresa la direcci√≥n del servicio de tapizados.');
            return;
          }
          
          locationData.tapizados = {
            tipo: 'domicilio',
            direccion: direccionTapizado,
            detalles: detallesTapizado
          };
        }
        
        this.appointmentData.serviceLocation = locationData;
        this.currentStep = 6;
        this.showResumen();
        
      } else if (this.currentStep === 6) {
        this.confirmAppointment();
        return;
      }
      
      this.showStep(this.currentStep);
    }

    previousStep() {
      if (this.currentStep > 1) {
        this.currentStep--;
        this.showStep(this.currentStep);
      }
    }

    showStep(step) {
      console.log('üìã Mostrando paso:', step);
      
      // Ocultar todos los pasos
      for (let i = 1; i <= 6; i++) {
        const stepDiv = document.getElementById(`step-${i}`);
        if (stepDiv) {
          stepDiv.style.display = 'none';
        }
      }
      
      // Mostrar paso actual
      const currentStepDiv = document.getElementById(`step-${step}`);
      if (currentStepDiv) {
        currentStepDiv.style.display = 'block';
      }
      
      // Actualizar barra de progreso
      this.updateProgressBar(step);
      
      // Actualizar botones
      this.updateButtons(step);
      
      // L√≥gica espec√≠fica por paso
      if (step === 4) {
        this.autoFillUserData();
      } else if (step === 5) {
        this.showLocationStep();
      }
    }

    updateProgressBar(step) {
      const percent = ((step - 1) / 5) * 100;
      const barFill = document.getElementById('wizard-bar-fill');
      if (barFill) {
        barFill.style.width = percent + '%';
      }
      
      // Actualizar indicadores
      for (let i = 1; i <= 6; i++) {
        const indicator = document.getElementById(`step-indicator-${i}`);
        if (indicator) {
          indicator.classList.remove('active', 'completed');
          if (i < step) {
            indicator.classList.add('completed');
          } else if (i === step) {
            indicator.classList.add('active');
          }
        }
      }
    }

    updateButtons(step) {
      const btnAnterior = document.getElementById('btn-anterior-fijo');
      const btnSiguiente = document.getElementById('btn-siguiente-fijo');
      const btnConfirmar = document.getElementById('btn-confirmar-fijo');
      
      if (btnAnterior) {
        btnAnterior.style.display = step > 1 ? 'block' : 'none';
      }
      
      if (btnSiguiente) {
        btnSiguiente.style.display = step < 6 ? 'block' : 'none';
      }
      
      if (btnConfirmar) {
        btnConfirmar.style.display = step === 6 ? 'block' : 'none';
      }
    }

    showLocationStep() {
      console.log('üìç Configurando paso de ubicaci√≥n...');
      
      // Determinar qu√© tipo de servicios est√°n seleccionados
      const hasVehiculos = this.selectedServices.some(service => service.category === 'vehiculos');
      const hasTapizados = this.selectedServices.some(service => service.category === 'tapizados');
      
      const ubicacionVehiculos = document.getElementById('ubicacion-vehiculos');
      const ubicacionTapizados = document.getElementById('ubicacion-tapizados');
      
      if (hasVehiculos && !hasTapizados) {
        // Solo servicios vehiculares
        ubicacionVehiculos.style.display = 'block';
        ubicacionTapizados.style.display = 'none';
        this.setupVehiculosLocationListeners();
      } else if (hasTapizados && !hasVehiculos) {
        // Solo servicios de tapizados
        ubicacionVehiculos.style.display = 'none';
        ubicacionTapizados.style.display = 'block';
      } else if (hasVehiculos && hasTapizados) {
        // Ambos tipos de servicios
        ubicacionVehiculos.style.display = 'block';
        ubicacionTapizados.style.display = 'block';
        this.setupVehiculosLocationListeners();
      }
    }

    setupVehiculosLocationListeners() {
      // Event listeners para las opciones de veh√≠culo
      const opcionBuscar = document.getElementById('opcion-buscar');
      const opcionTraer = document.getElementById('opcion-traer');
      const camposBuscar = document.getElementById('campos-buscar');
      const camposTraer = document.getElementById('campos-traer');
      
      if (opcionBuscar && opcionTraer) {
        opcionBuscar.addEventListener('change', () => {
          if (opcionBuscar.checked) {
            camposBuscar.style.display = 'block';
            camposTraer.style.display = 'none';
          }
        });
        
        opcionTraer.addEventListener('change', () => {
          if (opcionTraer.checked) {
            camposBuscar.style.display = 'none';
            camposTraer.style.display = 'block';
          }
        });
      }
    }

    autoFillUserData() {
      const token = localStorage.getItem('token');
      const userData = localStorage.getItem('userData');
      
      if (token && userData) {
        try {
          const user = JSON.parse(userData);
          
          // Separar nombre completo
          const nombres = user.name ? user.name.split(' ') : [];
          const nombre = nombres[0] || '';
          const apellido = nombres.slice(1).join(' ') || '';
          
          // Buscar tel√©fono
          const telefono = user.phone || user.telefono || user.phonenumber || user.celular || user.phoneNumber || '';
          
          // Auto-completar campos
          const nombreInput = document.getElementById('nombre');
          const apellidoInput = document.getElementById('apellido');
          const telefonoInput = document.getElementById('telefono');
          const emailInput = document.getElementById('email');
          
          if (nombreInput) nombreInput.value = nombre;
          if (apellidoInput) apellidoInput.value = apellido;
          if (telefonoInput) telefonoInput.value = telefono;
          if (emailInput) emailInput.value = user.email || '';
          
          console.log('‚úÖ Datos de usuario auto-completados');
          
        } catch (error) {
          console.error('‚ùå Error auto-completando datos:', error);
        }
      }
    }

    showResumen() {
      const resumenContainer = document.getElementById('resumen-turno');
      if (!resumenContainer) return;
      
      let html = '';
      let total = 0;
      
      this.selectedServices.forEach(service => {
        const subtotal = service.price * service.quantity;
        total += subtotal;
        html += `
          <div class="d-flex justify-content-between align-items-center mb-2">
            <span>${service.name} x${service.quantity}</span>
            <span>$${subtotal.toLocaleString()}</span>
          </div>
        `;
      });
      
      html += `
        <hr>
        <div class="d-flex justify-content-between align-items-center">
          <strong>Total:</strong>
          <strong>$${total.toLocaleString()}</strong>
        </div>
        <hr>
        <div><strong>Fecha:</strong> ${this.appointmentData.date}</div>
        <div><strong>Hora:</strong> ${this.appointmentData.time}</div>
        <div><strong>Cliente:</strong> ${this.appointmentData.clientName}</div>
        <div><strong>Tel√©fono:</strong> ${this.appointmentData.clientPhone}</div>
        <div><strong>Ubicaci√≥n:</strong></div>
        ${this.formatLocationInfo()}
      `;
      
      resumenContainer.innerHTML = html;
    }

    formatLocationInfo() {
      const locationData = this.appointmentData.serviceLocation;
      let html = '';
      
      if (locationData.vehiculos) {
        html += '<div class="ms-3 mb-2">';
        html += '<strong>üöó Servicios Vehiculares:</strong><br>';
        if (locationData.vehiculos.tipo === 'buscar') {
          html += `‚Ä¢ Buscar y entregar veh√≠culo<br>`;
          html += `‚Ä¢ Direcci√≥n: ${locationData.vehiculos.direccion}<br>`;
          if (locationData.vehiculos.detalles) {
            html += `‚Ä¢ Detalles: ${locationData.vehiculos.detalles}<br>`;
          }
        } else {
          html += `‚Ä¢ Cliente trae veh√≠culo al taller<br>`;
          html += `‚Ä¢ Direcci√≥n: ${locationData.vehiculos.direccion}<br>`;
        }
        html += '</div>';
      }
      
      if (locationData.tapizados) {
        html += '<div class="ms-3 mb-2">';
        html += '<strong>üõãÔ∏è Servicios de Tapizados:</strong><br>';
        html += `‚Ä¢ Servicio a domicilio<br>`;
        html += `‚Ä¢ Direcci√≥n: ${locationData.tapizados.direccion}<br>`;
        if (locationData.tapizados.detalles) {
          html += `‚Ä¢ Detalles: ${locationData.tapizados.detalles}<br>`;
        }
        html += '</div>';
      }
      
      return html;
    }

    async confirmAppointment() {
      console.log('üéØ Confirmando turno:', this.appointmentData);
      
      try {
        // Preparar datos para el backend
        const appointmentData = {
          appointmentDate: this.appointmentData.date,
          appointmentTime: this.appointmentData.time,
          services: this.appointmentData.services.map(s => ({
            service_id: s.service_id,
            quantity: s.quantity
          })),
          serviceLocation: JSON.stringify(this.appointmentData.serviceLocation),
          clientName: this.appointmentData.clientName,
          clientPhone: this.appointmentData.clientPhone,
          clientEmail: this.appointmentData.clientEmail,
          service_type: this.appointmentData.services.map(s => s.name).join(', '),
          totalAmount: this.appointmentData.totalAmount
        };
        
        // Agregar userId si el usuario est√° logueado
        const userData = localStorage.getItem('userData');
        if (userData) {
          const user = JSON.parse(userData);
          appointmentData.userId = user.id;
        }
        
        console.log('üì§ Enviando turno al backend:', appointmentData);
        
        // Enviar al backend
        const response = await this.apiService.createAppointment(appointmentData);
        
        if (response.success) {
          console.log('‚úÖ Turno creado exitosamente:', response);
          this.showSuccess();
        } else {
          console.error('‚ùå Error creando turno:', response.message);
          alert(`Error: ${response.message}`);
        }
        
      } catch (error) {
        console.error('‚ùå Error en confirmAppointment:', error);
        alert('Error al crear el turno. Por favor, intenta nuevamente.');
      }
    }

    showSuccess() {
      // Ocultar todos los pasos
      for (let i = 1; i <= 6; i++) {
        const stepDiv = document.getElementById(`step-${i}`);
        if (stepDiv) {
          stepDiv.style.display = 'none';
        }
      }
      
      // Mostrar mensaje de √©xito
      const successDiv = document.getElementById('turno-exito');
      if (successDiv) {
        successDiv.style.display = 'block';
      }
      
      // Ocultar botones
      const btnAnterior = document.getElementById('btn-anterior-fijo');
      const btnSiguiente = document.getElementById('btn-siguiente-fijo');
      const btnConfirmar = document.getElementById('btn-confirmar-fijo');
      
      if (btnAnterior) btnAnterior.style.display = 'none';
      if (btnSiguiente) btnSiguiente.style.display = 'none';
      if (btnConfirmar) btnConfirmar.style.display = 'none';
    }
  }

  // Inicializar cuando el DOM est√© listo
  document.addEventListener('DOMContentLoaded', function() {
    console.log('üåê DOM cargado, iniciando TurnosApp...');
    window.turnosApp = new TurnosApp();
  });

  // Funci√≥n global para cambiar categor√≠a (compatibilidad)
  window.cambiarCategoria = function() {
    if (window.turnosApp) {
      // Volver al paso 1 y mostrar categor√≠as
      window.turnosApp.currentStep = 1;
      window.turnosApp.selectedServices = [];
      window.turnosApp.updateSelectedServicesDisplay();
      window.turnosApp.showStep(1);
      
      // Mostrar categor√≠as
      const categoriaSelector = document.querySelector('.categoria-selector');
      if (categoriaSelector) categoriaSelector.style.display = 'block';
      
      // Ocultar contenedores de servicios
      const serviciosVehiculos = document.getElementById('servicios-vehiculos');
      const serviciosTapizados = document.getElementById('servicios-tapizados');
      
      if (serviciosVehiculos) serviciosVehiculos.style.display = 'none';
      if (serviciosTapizados) serviciosTapizados.style.display = 'none';
      
      // Ocultar bot√≥n siguiente
      const btnSiguiente = document.getElementById('btn-siguiente-fijo');
      if (btnSiguiente) {
        btnSiguiente.style.display = 'none';
      }
    }
  };
  </script>
</body>
</html> 